{"ast":null,"code":"//二次封装axios\nimport axios from \"axios\";\n//引入弹窗模块\nimport { message } from \"ant-design-vue\";\nimport { Promise } from \"core-js\";\nimport _ from '@/assets/utils';\n\n//登录和请求验证码的时候不需要传递token\nconst exclude = ['/captchaImage', '/login'];\nconst http = axios.create({\n  baseURL: '/api',\n  timeout: 60000\n});\n//设置请求拦截器\nhttp.interceptors.request.use(config => {\n  const token = _.storage.get('TK');\n  if (token && !exclude.includes(config.url)) {\n    config.headers['Authorization'] = token;\n  }\n  return config;\n});\n\n//设置响应拦截器\nhttp.interceptors.response.use(response => {\n  return response.data;\n}, reason => {\n  message.error('网络繁忙，请稍后再试~');\n  return Promise.reject(reason);\n});\n\n/* 导出http */\nexport default http;","map":{"version":3,"names":["axios","message","Promise","_","exclude","http","create","baseURL","timeout","interceptors","request","use","config","token","storage","get","includes","url","headers","response","data","reason","error","reject"],"sources":["/Users/Hary/Documents/personal/Wumei-Management/wumei/src/api/http.js"],"sourcesContent":["//二次封装axios\nimport axios from \"axios\";\n//引入弹窗模块\nimport { message } from \"ant-design-vue\";\nimport { Promise } from \"core-js\";\nimport _ from '@/assets/utils'\n\n//登录和请求验证码的时候不需要传递token\nconst exclude = ['/captchaImage', '/login']\n\nconst http = axios.create({\n    baseURL: '/api',\n    timeout: 60000\n})\n//设置请求拦截器\nhttp.interceptors.request.use(\n    config => {\n        const token = _.storage.get('TK')\n        if (token && !exclude.includes(config.url)) {\n            config.headers['Authorization'] = token\n        }\n        return config\n    }\n)\n\n//设置响应拦截器\nhttp.interceptors.response.use(\n    response => {\n        return response.data\n    },\n    reason => {\n        message.error('网络繁忙，请稍后再试~')\n        return Promise.reject(reason)\n    }\n)\n\n/* 导出http */\nexport default http"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB;AACA,SAASC,OAAO,QAAQ,gBAAgB;AACxC,SAASC,OAAO,QAAQ,SAAS;AACjC,OAAOC,CAAC,MAAM,gBAAgB;;AAE9B;AACA,MAAMC,OAAO,GAAG,CAAC,eAAe,EAAE,QAAQ,CAAC;AAE3C,MAAMC,IAAI,GAAGL,KAAK,CAACM,MAAM,CAAC;EACtBC,OAAO,EAAE,MAAM;EACfC,OAAO,EAAE;AACb,CAAC,CAAC;AACF;AACAH,IAAI,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAM,IAAI;EACN,MAAMC,KAAK,GAAGV,CAAC,CAACW,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC;EACjC,IAAIF,KAAK,IAAI,CAACT,OAAO,CAACY,QAAQ,CAACJ,MAAM,CAACK,GAAG,CAAC,EAAE;IACxCL,MAAM,CAACM,OAAO,CAAC,eAAe,CAAC,GAAGL,KAAK;EAC3C;EACA,OAAOD,MAAM;AACjB,CACJ,CAAC;;AAED;AACAP,IAAI,CAACI,YAAY,CAACU,QAAQ,CAACR,GAAG,CAC1BQ,QAAQ,IAAI;EACR,OAAOA,QAAQ,CAACC,IAAI;AACxB,CAAC,EACDC,MAAM,IAAI;EACNpB,OAAO,CAACqB,KAAK,CAAC,aAAa,CAAC;EAC5B,OAAOpB,OAAO,CAACqB,MAAM,CAACF,MAAM,CAAC;AACjC,CACJ,CAAC;;AAED;AACA,eAAehB,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}